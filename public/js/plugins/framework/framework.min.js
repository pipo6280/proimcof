var globalAppi={};Framework=function(){return{LoadFormData:function(a){var a=jQuery.extend({data:{},type:"post",cache:!1,loading:!0,dataType:"json",contentType:!1,processData:!1,pagina:"index.php",success:function(){},id_contenedor_body:"main_content",id_contenedor_header:"title_content"},a);if(a.loading)var b=Framework.Loading();$.ajax({data:a.data,type:a.type,url:a.pagina,cache:a.cache,dataType:a.dataType,contentType:a.contentType,processData:a.processData}).done(function(c){switch(a.dataType){case"html":"object"==typeof a.id_contenedor_body?Framework.InsertType({type:a.insertType,contenedor:$(a.id_contenedor_body),contenido:c}):Framework.InsertType({type:a.insertType,contenedor:$("#"+a.id_contenedor_body),contenido:c})}b&&b.remove(),a.success(c)})},LoadData:function(a){var a=jQuery.extend({pagina:"index.php",id_contenedor_header:"title_content",id_contenedor_body:"main_content",success:function(){},type:"post",dataType:"json",insertType:"html",data:{},loading:!0},a);if("undefined"==typeof id_smenu&&(id_smenu=!1),"undefined"==typeof txtAjax&&(txtAjax=!0),"object"==typeof a.data?!a.data.id_smenu&&id_smenu&&(a.data.id_smenu=id_smenu):id_smenu&&(a.data+="&id_smenu="+id_smenu),"object"==typeof a.data?!a.data.txtAjax&&txtAjax&&(a.data.txtAjax=txtAjax):txtAjax&&(a.data+="&txtAjax="+txtAjax),a.loading)var b=Framework.Loading();$.ajax({url:a.pagina,type:a.type,dataType:a.dataType,data:a.data,success:function(c){switch(a.dataType){case"json":var c=jQuery.extend({contenido:"",error:!1,titulo:null},c);if(c.error)return Framework.Alerta(c.error),b&&b.remove(),!1;a.id_contenedor_header&&c.titulo&&$("#"+a.id_contenedor_header).html(c.titulo),a.id_contenedor_body&&("object"==typeof a.id_contenedor_body?Framework.InsertType({type:a.insertType,contenedor:$(a.id_contenedor_body),contenido:c.contenido}):Framework.InsertType({type:a.insertType,contenedor:$("#"+a.id_contenedor_body),contenido:c.contenido})),c.script&&("object"==typeof c.script?$.each(c.script,function(a,b){Framework.AutoLoadJS({src:b})}):Framework.AutoLoadJS({src:c.script})),c.css&&("object"==typeof c.css?$.each(c.css,function(a,b){Framework.AutoLoadCss({src:b})}):Framework.AutoLoadCss({src:c.css}));break;case"html":"object"==typeof a.id_contenedor_body?Framework.InsertType({type:a.insertType,contenedor:$(a.id_contenedor_body),contenido:c}):Framework.InsertType({type:a.insertType,contenedor:$("#"+a.id_contenedor_body),contenido:c})}b&&b.remove(),a.success(c)},error:function(a,c,d,e){console.log(a,c,d,e),b&&b.remove(),Framework.Alerta({contenido:'Se ha producido el siguiente error:<br> <span class="rojo negrilla">Type Error: '+c+'</span><br><span class="rojo negrilla">'+a.responseText+"</span>"})}})},setValidaForm:function(a,b){if(a){var c="El formulario tiene errores de ingreso de datos o faltan datos obligatorios, por favor verifique la siguiente lista:<br/><br/><ul>",d=!1,e=$("#"+a),f="notnull";b&&(f=b);for(var g=$(e).find($("INPUT."+f)).length-1,h=0;h<=g;h++){var i="INPUT."+f+":eq("+h+")",j=$(e).find(i),k=$("label[for="+$(j).attr("id")+"]").html();""==j.val()&&"disabled"!=j.attr("disabled")?(d=!0,$(j).addClass("bg-warning-important"),c+="<li>"+k+"</li>"):$(j).removeClass("bg-warning-important")}for(var g=Number($("#"+a).find($("SELECT."+f)).length)-1,h=0;h<=g;h++){var i="SELECT."+f+":eq("+h+")",l=$(e).find(i),k=$("label[for="+$(l).attr("id")+"]").html();""==l.val()&&"disabled"!=l.attr("disabled")?(d=!0,$(l).addClass("bg-warning-important"),c+="<li>"+k+"</li>"):$(l).removeClass("bg-warning-important")}for(var g=$("#"+a).find($("TEXTAREA."+f)).length-1,h=0;h<=g;h++){var i="TEXTAREA."+f+":eq("+h+")",l=$(e).find(i),m=$(l).attr("id").substring(3),k=$("label[for=txt"+m+"]").html();""==l.val()&&"disabled"!=l.attr("disabled")?(d=!0,$(l).addClass("bg-warning-important"),c+="<li>"+k+"</li>"):$(l).removeClass("bg-warning-important")}for(var g=$("#"+a).find("input:radio."+f+":first-child").length-1,h=0;h<=g;h++){var n=$("input:radio."+f+":first-child").eq(h).attr("name");$('input[name="'+n+'"]').each(function(){if($('input[name="'+n+'"]').is(":checked"))$("label[for="+n+"]").removeClass("red-text");else{d=!0,$("label[for="+n+"]").addClass("red-text");var a=$(this).attr("id").substring(3),b=$("label[for="+n+"]").html();c+="<li>"+b+" - "+$("label[for=txt"+a+"]").html()+"</li>"}})}var o=!0;return 1==d?(c+="</ul>",Framework.Alerta(c),o=!1):o=!0,o}return!0},AutoLoadJS:function(a){var a=jQuery.extend({src:"",id:a.src},a),b=document.getElementById(a.id);if(void 0==b){var c=document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("id",a.id),c.setAttribute("src",a.src),document.getElementsByTagName("head")[0].appendChild(c)}},AutoLoadCss:function(a){var a=jQuery.extend({src:"",id:a.src},a),b=document.getElementById(a.id);if(void 0==b){var c=document.createElement("link");c.setAttribute("type","text/css"),c.setAttribute("rel","stylesheet"),c.setAttribute("id",a.id),c.setAttribute("src",a.src),document.getElementsByTagName("head")[0].appendChild(c)}},InsertType:function(a){var a=jQuery.extend({type:"html",contenedor:"",contenido:""},a);switch(a.type){case"html":a.contenedor.html(a.contenido);break;case"append":a.contenedor.append(a.contenido);break;case"before":a.contenedor.before(a.contenido);break;case"after":a.contenedor.after(a.contenido)}},Loading:function(){var a='<div class="CARGANDO"></div>';return $(a).appendTo("body")},AutoDialog:function(a){var a=jQuery.extend({title:"Dialogo",modal:!0,width:"auto",height:"auto",maxHeight:!1,maxWidth:!1,minHeight:!1,minWidth:!1,resizable:!0,hide:"slide",contenido:!1,closeOnEscape:!1,id_dialog:"Dialog-Form",position:{my:"center",at:"top",of:window,collision:"fit",using:function(a){var b=$(this).css(a).offset().top;b<0&&$(this).css("top",a.top-b)}},data:{},pagina:"",funcionOnLoad:function(){},dataType:"json",buttons:{Cerrar:function(){$(this).dialog("close")}},close:function(){}},a);if(0==$("#"+a.id_dialog).length){var b='<div id="'+a.id_dialog+'"></div>';$("body").append(b)}a.contenido?($("#"+a.id_dialog).html(a.contenido),$("#"+a.id_dialog).dialog(a),a.funcionOnLoad()):(a.id_contenedor_body=a.id_dialog,a.success=function(){$("#"+a.id_dialog).dialog(a),a.funcionOnLoad()},Framework.LoadData(a))},AutoTable:function(a){},Format:function(a){var a=jQuery.extend({valor:0,formato:"float"},a);switch(a.formato){case"float":var b=parseFloat(a.valor);isNaN(b)&&(b=0)}return b},AutoEditor:function(a){var a=jQuery.extend({object:"",ckeditor:{}},a),b=jQuery.extend({object:"",skin:"kama"},a.ckeditor);$(a.object).ckeditor(b)},AutoEditorTinyMCE:function(a){tinyMCE.init({mode:"textareas",theme:"advanced",language:"es",height:850,plugins:"safari,pagebreak,style,layer,table,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",theme_advanced_buttons1:"save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",theme_advanced_buttons2:"cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",theme_advanced_buttons3:"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",theme_advanced_buttons4:"insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:!0,content_css:[RUTA_SITE+"public/css/style_content.css",RUTA_SITE+"public/css/bootstrap.min.css"],relative_urls:!0,file_browser_callback:Framework.AutoMadFileBrowser})},AutoMadFileBrowser:function(a,b,c,d){return tinymce.activeEditor.windowManager.open({title:"File Manager",file:RUTA_EDITOR+"/upload/mfm.php?field="+a+"&url="+RUTA_SITE+"public/img/content/&server="+RUTA_SITE,width:640,height:450,resizable:"no",inline:"yes",close_previous:"no"},{window:d,input:a}),!1},AutoSuma:function(a){var a=jQuery.extend({clase:"suma",contenedorId:!1,contenedorType:"html",inputType:"checkbox",symbol:"$",funcionConValor:function(){},funcionSinValor:function(){}},a),b=0;if($("."+a.clase).each(function(){var c=$(this),d=0;switch(a.inputType){case"text":d=Framework.Format({valor:c.val()});break;case"checkbox":c.is(":checked")&&(d=Framework.Format({valor:c.val()}))}b+=d}),b>0?a.funcionConValor(b):a.funcionSinValor(b),!a.contenedorId)return b;switch(a.contenedorType){case"text":$("#"+a.contenedorId).val(b);break;case"html":$("#"+a.contenedorId).html(a.symbol+""+b)}},Autocompletado:function(options){if(options.inputText&&options.inputText.length>0){var data=options.inputText.data(),combo_id="";"undefined"!=typeof $(options.inputText).attr("id")&&(combo_id=options.inputText.attr("id"));var options=jQuery.extend({inputText:!1,inputTextValue:options.inputText.val(),inputHiddenId:data.input_hidden_id,inputHiddenName:data.input_hidden_name,inputHiddenValue:data.input_hidden_value,control:data.control,data:data.data,check:data.check,checkData:data.check_data,checkTitle:data.check_title,onSearch:function(){data.on_search&&eval(data.on_search+"()")},onSelect:function(a){if(data.on_select){var b="";$.each(a,function(a,c){b+=a+':"'+c+'",'}),$.each(data,function(a,c){a=a.replace("-","_"),b+=a+':"'+c+'",'});var c=data.on_select.split(";");$.each(c,function(a,c){jQuery.globalEval(c+"({"+b+'}, "'+combo_id+'")')})}}},options);options.data||(options.data=""),$(options.inputText).addClass("search_txt");var clearAutocompletado=function(){options.inputText.val(""),inputHidden.val(null),options.onSearch()},source=RUTA_SITE+"app/ajax/autocompletado.php?control="+options.control+"&condicion="+options.data,idHidden="",nameHidden="",valueHidden="";options.inputHiddenId&&(idHidden='id="'+options.inputHiddenId+'"'),options.inputHiddenName&&(nameHidden='name="'+options.inputHiddenName+'"'),options.inputHiddenValue&&(valueHidden='value="'+options.inputHiddenValue+'"');var hidden='<input type="hidden" '+idHidden+" "+nameHidden+" "+valueHidden+">";options.inputText.after(hidden);var inputHidden=options.inputText.next("INPUT");if(options.check){options.checkData||(options.checkData=""),options.checkTitle||(options.checkTitle="Todos");var sourceCheck=RUTA_SITE+"app/ajax/autocompletado.php?control="+options.control+"&condicion="+options.checkData,checkbox='<input type="checkbox" title="'+options.checkTitle+'">';inputHidden.after(checkbox),inputCheckbox=inputHidden.next(),inputCheckbox.on("click",function(){var a=$(this);a.is(":checked")?(clearAutocompletado(),options.inputText.autocomplete("option","source",sourceCheck)):(clearAutocompletado(),options.inputText.autocomplete("option","source",source))})}options.inputText.autocomplete({delay:600,source:source,search:function(a,b){inputHidden.val(null),options.onSearch()},select:function(a,b){console.log(a,b),inputHidden.val(b.item.id),options.onSelect(b.item,a),options.inputText.attr("title",b.item.value)}}).data("ui-autocomplete")._renderItem=function(a,b){return console.log(a,b),$("<li></li>").data("item.autocomplete",b).append(void 0!=b.icon?b.icon:b.label).appendTo(a)},options.inputText.on({click:function(a){clearAutocompletado()},keyup:function(){""==options.inputText.val()&&inputHidden.val(null)}})}else Framework.Alerta("No se definio un objeto vÃ¡lido para el autocompletado")},AutoCheck:function(a){var a=jQuery.extend({object:"",childClass:"autoCheckeado",activeClass:"resaltado",parents:"tr"},a);$(a.object).is(":checked")?($("."+a.childClass).attr("checked",!0),$("."+a.childClass).parents(a.parents).addClass(a.activeClass)):($("."+a.childClass).attr("checked",!1),$("."+a.childClass).parents(a.parents).removeClass(a.activeClass))},Alerta:function(a){"string"==typeof a&&(a={contenido:a});var a=jQuery.extend({contenido:"",callback:function(){},title:"Mensaje",id:"dialog-message"},a);Framework.AutoDialog({id_dialog:a.id,contenido:a.contenido,title:a.title,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var b=$(this).css(a).offset().top;b<0&&$(this).css("top",a.top-b)}},buttons:{Aceptar:function(){a.callback(),$(this).remove()}}})},Confirmar:function(a){var a=jQuery.extend({title:"Mensaje de confirmación",contenido:"Esta seguro de realizar esta operación?",aceptar:function(){},cancelar:function(){}},a);Framework.AutoDialog({id_dialog:"dialog-confirmar",contenido:a.contenido,title:a.title,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var b=$(this).css(a).offset().top;b<0&&$(this).css("top",a.top-b)}},buttons:{Aceptar:function(){a.aceptar(),$(this).remove()},Cancelar:function(){a.cancelar(),$(this).remove()}}})},AlertaArray:function(a,b){$.each(a,function(a,c){"object"==typeof c&&b&&(alert("CONTIENE ARRAY"),Framework.AlertaArray(c,b)),alert(a+": "+c)})},CompararValor:function(a){var a=jQuery.extend({clase:"valor",valor:0,type:"<"},a),b=0,c=0;switch(typeof a.valor){case"numbre":c=a.valor;break;case"string":$.each($(a.valor),function(){var a=$(this);"checkbox"==a.attr("type")?a.is(":checked")&&(c+=Framework.Format({valor:a.val()})):c+=a.val()?Framework.Format({valor:a.val()}):Framework.Format({valor:a.text()})})}switch($.each($("."+a.clase),function(){var a=$(this);b+=Framework.Format({valor:a.val()})}),a.type){case"<":if(b<c)return Framework.Alerta("la sumatoria de Pagos no puede ser menor a "+c),!1;break;case">":if(b>c)return Framework.Alerta("la sumatoria de Pagos no puede ser mayor a "+c),!1}return!0},aleatorio:function(){return numPosibilidades=15245874,aleat=Math.random()*numPosibilidades,aleat=Math.round(aleat),parseInt(aleat)},SelectDependiente:function(a){var a=jQuery.extend({sql:"",contenedor:"",pagina:"libphp/select_multi.php",selected:""},a);Framework.LoadData({pagina:a.pagina,id_contenedor_body:a.contenedor,dataType:"html",data:{select_var:1,query:a.sql,selected:a.selected}})},ValidarValorMaximo:function(a){var a=jQuery.extend({object:""},a),b=a.object.data(),c=a.object.val();b.cantidad_maxima>0&&b.cantidad_maxima<c&&(Framework.Alerta("la cantidad maxima pemitida es "+b.cantidad_maxima),a.object.val(b.valor_default))},AutoDetectChange:function(a){var a=jQuery.extend({object:"",parent:"tr",changeClass:"changed",notChangeClass:"not-changed"},a);$($(a.object).find("input,textarea,select")).on("change",function(){var b=$(this).parents(a.parent);b.addClass(a.changeClass),b.removeClass(a.notChangeClass)})},SendOnlyChanges:function(a){$(".not-changed").find("input,textarea,select").attr("disabled",!0);var b=$("#"+a).serialize();return $(".not-changed").find("input,textarea,select").attr("disabled",!1),b},ReadQr:function(a){var a=jQuery.extend({contenedor:"",width:"300px",height:"300px",margin:"0 auto 0 auto",success:function(b){alert(b),$("#"+a.contenedor).html("")},error:function(){},videoError:function(){},verResultado:!1,verError:!1,verVideoError:!1},a),b=$('<div style="width:'+a.width+";height:"+a.width+";margin:"+a.margin+';"></div>').appendTo($("#"+a.contenedor)),c=$("<div></div>").appendTo($("#"+a.contenedor)),d=$("<div></div>").appendTo($("#"+a.contenedor)),e=$("<div></div>").appendTo($("#"+a.contenedor));$(b).html5_qrcode(function(b){a.verResultado&&$(c).html(b),a.success(b)},function(b){a.verError&&$(d).html(b),a.error(b)},function(b){a.verVideoError&&$(e).html(b),a.videoError(b)})},PingImg:function(a){var a=jQuery.extend({url:"",success:function(){},error:function(){}},a),c=new Image;c.onload=function(b){a.success()},c.onerror=function(b){a.error()},c.src=a.url+"?"+(new Date).getTime()},AutoTab:function(a,b){var b=jQuery.extend({},b);a?$(a).tabs(b):Framework.Alerta("No se especificÃƒÂ³ un objecto!")},ReLogin:function(a){},executeJavascriptFromString:function(a){for(var c,b=!1,d=/<script[^>]*>([\s\S]+)<\/script>/gi,e=0;c=d.exec(a);)eval.call(window,c[1]),b=!0,e++;return b},defineNameSpace:function(newvar,oProperties){var resultado=!1,typeVariable=typeof eval("globalAppi."+newvar);if("undefined"===typeVariable){var newObj=eval("globalAppi."+newvar+"= {}");for(el in oProperties)newObj[el]=oProperties[el];resultado=!0}return resultado},appModel:{createApp:function(newvar,oProperties){var resultado=!1;if(newvar.length>0){var aPathFile=newvar.split("."),nombreApp=aPathFile[aPathFile.length-1];newvar=aPathFile.join("_");var typeVariable=typeof eval("globalAppi."+newvar);if("undefined"===typeVariable){var newObj=eval("globalAppi."+newvar+"= {}");for(var property in oProperties)newObj[property]=oProperties[property];newObj.appName=nombreApp,resultado=!0}}else console.error("createApp: string empty!!");return resultado},initApp:function(newvar){if(newvar.length>0){var aPathFile=newvar.split("."),appName=aPathFile[aPathFile.length-1];newvar=aPathFile.join("_")}eval("globalAppi."+newvar+".initApp()"),console.log(appName+": inicializado.")},getApp:function(a){if(a.length>0){var b=a.split(".");b[b.length-1];a=b.join("_")}return a}},serializeObjToStringGet:function(a){var b="";for(key in a)b+=b.length>0?"&"+key+"="+a[key]:key+"="+a[key];return b},setFormatResult:function(a){var b=a.element;return $(b).data("foo")?$(b).data("foo"):a.text}}}();